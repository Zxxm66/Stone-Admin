<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}Stone - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è{% endblock %}</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíé</text></svg>">
    <style>


        :root {
            --primary: #131c39;
            --secondary: #000000;
            --success: #28a745;
            --text: #ffffff;
            --light-text: rgba(255, 255, 255, 0.85);
            --background: #f0f2f5;
            --card-bg: linear-gradient(135deg, var(--primary), var(--secondary));
            --profit-bg: linear-gradient(135deg, var(--success), #20c997);
            --today-bg: linear-gradient(135deg, #131c39, #3750a1);
            --border: rgba(255, 255, 255, 0.2);
            --danger: #dc3545;
            --skeleton-bg: rgba(255, 255, 255, 0.1);
            --filter-bg: #ffffff;
            --filter-text: #333333;
            --font-primary: 'Inter', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-primary);
            font-weight: 500;
            -webkit-tap-highlight-color: transparent;
        }



body {
            background-color: var(--background);
            color: #333;
            padding: 8px;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            font-family: var(--font-primary);
            font-weight: 600;
        }

        .container {
            max-width: 390px;
            margin: 0 auto;
            min-height: calc(100vh - 16px);
        }

        header {
            margin-bottom: 16px;
            padding: 16px 12px;
            background: white;
            border-radius: 14px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

h1 {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 16px;
            text-align: center;
        }

        /* –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–´–ï –ö–ù–û–ü–ö–ò –î–õ–Ø IPHONE 12 PRO */
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 8px;
        }

        .nav-button {
            padding: 10px 4px;
            border-radius: 10px;
            background: var(--card-bg);
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-height: 60px;
            line-height: 1.2;
            border: none;
            cursor: pointer;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .nav-button.active {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .nav-button.logout {
            background: linear-gradient(135deg, var(--danger), #ff6624);
            grid-column: 1 / -1;
            flex-direction: row;
            padding: 12px 8px;
            margin-top: 4px;
            min-height: 50px;
            font-size: 12px;
        }

        .nav-button svg {
            width: 16px;
            height: 16px;
            margin-bottom: 5px;
        }

        .nav-button.logout svg {
            margin-bottom: 0;
            margin-right: 6px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            color: var(--text);
            display: flex;
            flex-direction: column;
            min-height: 110px;
        }

.card-title {
            font-size: 12px;
            color: var(--light-text);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-weight: 600;
        }

        .card-title svg {
            margin-right: 6px;
            width: 14px;
            height: 14px;
        }

        .card-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .card-description {
            font-size: 11px;
            color: var(--light-text);
            margin-top: auto;
        }

         .section-title {
            font-size: 16px;
            margin: 16px 0 12px;
            font-weight: 700;
            color: #333;
            padding-left: 8px;
            border-left: 3px solid var(--primary);
        }

        .orders-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px;
            color: var(--text);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .orders-title {
            font-size: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .orders-title svg {
            margin-right: 8px;
            width: 16px;
            height: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 25px 12px;
            color: var(--light-text);
        }

        .empty-state svg {
            width: 40px;
            height: 40px;
            margin-bottom: 10px;
            opacity: 0.7;
        }

        .empty-state p {
            font-size: 13px;
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .order-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            flex-direction: column;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .order-id {
            font-size: 12px;
            color: var(--light-text);
        }

        .order-date {
            font-size: 12px;
            color: var(--light-text);
        }

        .order-product {
            font-weight: 700;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .order-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 12px;
            color: var(--light-text);
        }

        .order-price {
            font-weight: 700;
            color: var(--text);
        }

        .order-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .order-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;

        }

        .confirm-btn {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .cancel-btn {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }

        .return-btn {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .view-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            text-decoration: none !important;
        }

        .order-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* –°–∫–µ–ª–µ—Ç–æ–Ω-–∑–∞–≥—Ä—É–∑—á–∏–∫ */
        .skeleton {
            animation: skeleton-loading 1.5s linear infinite alternate;
            background-color: var(--skeleton-bg);
            border-radius: 4px;
        }

        .skeleton-text {
            width: 100%;
            height: 12px;
            margin-bottom: 8px;
        }

        .skeleton-title {
            width: 60%;
            height: 16px;
            margin-bottom: 12px;
        }

        .skeleton-value {
            width: 70%;
            height: 24px;
            margin-bottom: 8px;
        }

        @keyframes skeleton-loading {
            0% {
                opacity: 0.7;
            }
            100% {
                opacity: 0.3;
            }
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ */
        .icon-improved {
            filter: brightness(0) invert(1);
            opacity: 0.9;
        }

        .notification-icon {
            width: 16px;
            height: 16px;
            filter: brightness(0) invert(1);
            opacity: 0.9;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            padding: 12px;
            color: #666;
            font-size: 11px;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è iPhone 12 Pro */
        @media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
            body {
                padding: 8px;
            }

            .container {
                max-width: 390px;
            }

            header {
                padding: 16px 10px;
                margin-bottom: 16px;
            }

            .nav-buttons {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
            }

            .nav-button {
                font-size: 10px;
                padding: 8px 2px;
                min-height: 58px;
            }

            .nav-button.logout {
                margin-top: 6px;
                padding: 10px 6px;
                min-height: 48px;
            }
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 340px) {
            body {
                padding: 6px;
            }

            header {
                padding: 12px 6px;
            }

            h1 {
                font-size: 16px;
            }

            .nav-buttons {
                gap: 4px;
            }

            .nav-button {
                font-size: 9px;
                padding: 6px 1px;
                min-height: 55px;
            }

            .nav-button svg {
                width: 14px;
                height: 14px;
                margin-bottom: 4px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .card {
                padding: 14px;
                min-height: 100px;
            }

            .card-value {
                font-size: 18px;
            }

            .order-actions {
                flex-direction: column;
            }
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }

            .container {
                max-width: 1200px;
            }

            .nav-buttons {
                grid-template-columns: repeat(5, 1fr);
                gap: 12px;
            }

            .nav-button {
                min-height: 70px;
                font-size: 12px;
                padding: 12px 6px;
            }

            .nav-button.logout {
                grid-column: auto;
                flex-direction: column;
                margin-top: 0;
            }

            .nav-button.logout svg {
                margin-right: 0;
                margin-bottom: 6px;
            }

            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
               .btn {
            display: inline-flex;
            align-items: center;
            padding: 10px 16px;
            background: var(--card-bg);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top:20px;
        }
        {% block extra_css %}{% endblock %}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>{% block header_title %}Stone - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è{% endblock %}</h1>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
            <div class="nav-buttons">
                <a href="/" class="nav-button {% if active_page == 'dashboard' %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon-improved">
                        <g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                            <path d="M55 193 c-27 -20 -44 -38 -37 -41 7 -2 12 -22 12 -47 0 -37 5 -47 30 -65 24 -17 41 -20 92 -18 l63 3 3 62 3 62 -51 40 c-29 23 -55 41 -58 41 -4 0 -29 -17 -57 -37z m90 -9 c21 -14 25 -24 25 -65 0 -42 -3 -49 -20 -49 -16 0 -20 7 -20 35 0 28 -4 35 -20 35 -16 0 -20 -7 -20 -35 0 -28 -4 -35 -20 -35 -17 0 -20 7 -20 49 0 39 4 52 23 64 29 21 42 21 72 1z"/>
                        </g>
                    </svg>
                    –ì–ª–∞–≤–Ω–∞—è
                </a>
                <a href="/products" class="nav-button {% if active_page == 'products' %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="icon-improved">
                        <g transform="translate(0.000000,100.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                            <path d="M360 860 c-113 -22 -211 -39 -217 -39 -10 -1 -13 -51 -12 -218 0 -120 3 -235 7 -256 6 -29 30 -61 111 -148 l105 -111 41 5 c90 13 478 116 494 133 3 3 7 119 9 257 l4 252 -140 83 c-92 54 -149 82 -168 81 -16 0 -121 -18 -234 -39z m351 -36 c51 -30 105 -63 119 -71 l25 -17 -55 -12 c-83 -20 -96 -17 -160 26 -32 22 -84 55 -115 74 l-58 35 39 6 c21 4 44 8 49 10 33 11 71 -1 156 -51z m-153 -45 c62 -39 112 -74 112 -79 0 -11 -96 -24 -112 -14 -7 4 -57 39 -110 78 -86 62 -95 72 -75 78 52 15 76 7 185 -63z m-130 -25 c56 -41 102 -79 102 -83 0 -4 -38 -16 -85 -26 l-84 -17 -88 76 c-48 42 -92 76 -96 76 -5 0 -7 -101 -5 -225 1 -124 0 -225 -3 -225 -14 0 -19 72 -19 266 0 231 -12 202 90 223 76 15 82 13 188 -65z m452 -243 c0 -115 -4 -221 -9 -234 -6 -14 -28 -33 -55 -45 -53 -25 -288 -88 -361 -97 -85 -11 -84 -15 -86 245 l-3 225 65 16 c35 8 79 18 97 22 l32 7 0 -71 0 -70 29 15 c16 9 31 13 34 10 3 -3 25 1 49 9 l43 15 3 65 3 64 67 15 c37 9 73 16 80 17 9 1 12 -47 12 -208z m-180 114 c0 -48 -3 -55 -19 -55 -11 0 -22 -4 -25 -9 -3 -5 -22 -9 -41 -8 l-35 1 0 52 0 52 48 10 c75 15 72 17 72 -43z"/>
                            <path d="M789 389 c-9 -17 -9 -24 0 -27 6 -2 11 -15 11 -28 0 -35 20 -30 22 6 1 17 2 38 2 47 1 26 -21 27 -35 2z"/>
                            <path d="M719 369 c-9 -17 -9 -24 0 -27 6 -2 11 -15 11 -28 0 -35 20 -30 22 6 1 17 2 38 2 47 1 26 -21 27 -35 2z"/>
                            <path d="M763 278 c-35 -11 -63 -24 -63 -30 0 -5 8 -7 18 -4 85 24 132 41 132 48 0 11 -16 9 -87 -14z"/>
                        </g>
                    </svg>
                    –¢–æ–≤–∞—Ä—ã
                </a>
                <a href="/orders" class="nav-button {% if active_page == 'orders' %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="icon-improved">
                        <g transform="translate(0.000000,50.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                            <path d="M42 408 c-8 -8 -12 -54 -12 -140 0 -107 -2 -128 -15 -128 -20 0 -19 -24 1 -44 12 -13 39 -16 130 -16 69 0 114 4 114 10 0 6 -45 10 -114 10 -66 0 -117 4 -121 10 -4 6 38 10 119 10 156 0 171 18 19 22 l-108 3 0 125 0 125 195 0 195 0 3 -102 c1 -58 7 -103 12 -103 15 0 13 203 -2 218 -17 17 -399 17 -416 0z"/>
                            <path d="M352 218 c-7 -7 -12 -20 -12 -30 0 -12 -8 -18 -24 -18 -23 0 -25 -4 -31 -74 -4 -41 -4 -79 -1 -85 9 -15 193 -15 202 0 3 6 3 44 -1 85 -6 67 -9 74 -29 74 -15 0 -25 9 -33 30 -12 32 -48 41 -71 18z m56 -31 c3 -12 -3 -17 -22 -17 -25 0 -35 18 -19 34 12 12 38 2 41 -17z m56 -83 c12 -89 16 -84 -79 -84 -95 0 -91 -5 -79 84 l7 46 72 0 72 0 7 -46z"/>
                        </g>
                    </svg>
                    –ó–∞–∫–∞–∑—ã
                </a>
                <a href="/notifications" class="nav-button {% if active_page == 'notifications' %}active{% endif %}">
                    <svg class="notification-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 48 48">
                        <g transform="translate(0.000000,48.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                            <path d="M127 422 c-22 -25 -24 -112 -2 -112 11 0 15 12 15 45 0 48 20 69 43 46 6 -6 32 -11 57 -11 25 0 51 5 57 11 16 16 43 3 43 -21 0 -13 -7 -20 -20 -20 -11 0 -20 -7 -20 -15 0 -12 13 -15 60 -15 l60 0 0 -65 c0 -51 -3 -65 -15 -65 -8 0 -15 -7 -15 -15 0 -20 24 -19 44 1 11 11 16 35 16 79 0 70 -14 95 -56 95 -19 0 -24 5 -24 23 0 45 -28 57 -132 57 -79 0 -98 -3 -111 -18z"/>
                            <path d="M236 344 c-23 -22 -23 -192 -1 -201 9 -3 23 2 33 10 9 9 35 17 57 19 22 2 39 8 38 13 -4 15 -82 18 -99 4 -12 -10 -14 0 -14 65 0 61 3 76 15 76 8 0 15 7 15 15 0 20 -24 19 -44 -1z"/>
                            <path d="M117 274 c-4 -4 -7 -51 -7 -104 0 -127 3 -130 132 -130 107 0 128 11 128 68 0 44 -28 43 -32 0 l-3 -33 -95 0 -95 0 -3 95 c-3 90 -10 119 -25 104z"/>
                        </g>
                    </svg>
                    –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                </a>
                <a href="/logout" class="nav-button logout">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="icon-improved">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    –í—ã–π—Ç–∏
                </a>
            </div>
        </header>

        <main>
            {% block content %}{% endblock %}
        </main>

        <footer>
            <p>¬© 2025 Stone. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p>–í–µ—Ä—Å–∏—è 1.2.0</p>
        </footer>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∞—Å—Å–∞
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.body.classList.add('mobile-device');
        }

        // –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è iPhone
        if (/iPhone/i.test(navigator.userAgent)) {
            document.body.classList.add('iphone');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message, type = 'info') {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.textContent = message;

            let bgColor = 'var(--primary)';
            if (type === 'success') bgColor = 'var(--success)';
            if (type === 'error') bgColor = 'var(--danger)';

            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${bgColor};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-size: 14px;
                opacity: 0;
                transition: opacity 0.3s;
                max-width: 80%;
                text-align: center;
            `;

            document.body.appendChild(notification);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 10);

            // –£–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
        function confirmAction(message, callback) {
            if (confirm(message)) {
                callback();
            }
        }

        {% block extra_js %}
        {% endblock %}
    </script>
</body>
</html>